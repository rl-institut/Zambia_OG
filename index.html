<!Doctype html>
<html>
	<head>
		<meta charset=utf-8 />
		<title>SimpleLeafletMap</title>
		
		<!-- Stylesheet defines map extent -->
		<link rel="stylesheet" href="css/styles.css"/>
		<!-- Stylesheet for Leaflet icons, fonts etc -->
		<link rel="stylesheet" href="css/leaflet.css"/>
	</head>


	<body>
		<div id="map"></div>
		
		<!--jquery - enables loading a GeoJson from a file directly into Leaflet -->
		<script src="javascript/jquery.min.js"></script>
		
		<!--Leaflet - JS-library for slippy maps -->		
		<script src="javascript/leaflet.js"></script>


		<script>
			let options = {
				center: [-13.22, 27.85],
				zoom: 6,
				minZoom: 6,
				maxZoom: 16,
				zoomControl: false,
				maxBounds: [[-20, 19],[-8, 32]]
			}

			//
			// Create empty leaflet-map (named "map") on canvas with parameters defined in options
			//

			let map = L.map("map", options);



			//
			// Definition of Basemap-Tile Sources to add map 
			//


			
			let gray = L.tileLayer("https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png", {
			maxZoom: 19,
			attribution: '&copy; <a href="http://www.wfmlabs.org">wfmlabs</a>'
			});

			let osm = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
			maxZoom: 19,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			});

        		let topo = L.tileLayer("http://{s}.tile.opentopomap.org/{z}/{x}/{y}.png", {
        		maxZoom: 19,
        		attribution: '&copy; <a href="https://opentopomap.org">OpenTopoMap</a>'
			}).addTo(map);   // .addTo(map) loads this as the initial basemap			


			// name set of tilelayers and adds them to the layer-selector
			let baseMaps = {
				"Graycale": gray,
				"OpenStreetMap": osm,
				"OpenTopoMap": topo
			};



			// loading a GeoJSON file. Here sample Post-office-data from OpenStreetMap 
			$.getJSON("data/sampledata_postoffices.geojson",function(data){
			// L.geoJson function is used to parse the geojson file and load it onto the map
			var datalayer = L.geoJson(data ,{
				//popups and their content are defined here
				onEachFeature: function(feature, featureLayer) {
				featureLayer.bindPopup(feature.properties.name);
				}
			}).addTo(map);
			// command centers and zooms the map to the bounds of datalayer
			//map.fitBounds(datalayer.getBounds());
			});


			L.control.layers(baseMaps).addTo(map);

		</script>
	
		
	</body>

</html>



